;================================================================================================
; MAIN CONFIGURATION FILE OF WINDOWSORCHESTRATOR
;================================================================================================
;
; WARNING: This file controls the critical behavior of the system and applications.
; Modify these settings with caution. An incorrect configuration can lead to
; unexpected system behavior (e.g., failure to launch the main application).
;
; SYNTAX:
;   - Lines beginning with a semicolon (;) are comments and are ignored.
;   - Boolean values must be 'true' or 'false'.
;   - To disable a feature (e.g., scheduled reboot), leave its value empty.
;
;================================================================================================

[SystemConfig]
;------------------------------------------------------------------------------------------------
; Manages operating system-level settings: startup, updates, session.
;------------------------------------------------------------------------------------------------

;--- USER SESSION MANAGEMENT ---

; Username for automatic logon (autologon).
; OPTION 1 (Recommended): Leave empty. The script will automatically detect the already configured user.
; OPTION 2 (New installation): Specify the exact username (e.g., Admin) to force its configuration.
; IMPORTANT: This field cannot contain variables (like %USERNAME%).
AutoLoginUsername=

; Enables or disables Windows automatic logon.
; The password itself must be securely configured using the Sysinternals Autologon.exe tool.
;   true : Ensures that automatic logon is enabled in the registry (AutoAdminLogon=1).
;   false : Forces the deactivation of automatic logon (AutoAdminLogon=0).
EnableAutoLogin=false


;--- POWER AND STARTUP MANAGEMENT ---

; Disable Windows Fast Startup.
;   true : (Recommended) Disables "fast startup" to ensure a full and more stable reboot.
;   false : Lets Windows manage this setting.
DisableFastStartup=true

; Disable computer sleep.
;   true : Prevents the system from entering sleep or hibernate mode (S3/S4). Useful for systems that must remain active.
;   false : Allows sleep according to Windows settings.
DisableSleep=true

; Disable screen sleep.
;   true : Prevents the screen from turning off after a period of inactivity.
;   false : Allows the screen to sleep.
DisableScreenSleep=false


;--- UPDATES AND REBOOTS MANAGEMENT ---

; Complete disabling of the Windows Update service.
;   true : The Windows Update service is disabled, preventing automatic updates.
;   false : The Windows Update service is allowed to run normally.
DisableWindowsUpdate=true

; Prevents Windows from automatically rebooting after an update.
;   true : Prevents forced reboot if a user is logged on.
;   false : Allows Windows to reboot automatically.
DisableAutoReboot=true

; Time (HH:MM) of the daily reboot scheduled by the script.
; To disable the daily reboot, leave this value empty.
ScheduledRebootTime=03:00


;--- SCHEDULED ACTION BEFORE DAILY REBOOT ---

; Time (HH:MM) to execute a preparatory command before the scheduled reboot.
; Must be earlier than 'ScheduledRebootTime'. Leave empty to not execute any action.
PreRebootActionTime=02:55

; Command or path to the script/executable to run before the reboot.
; Example: C:\Scripts\backup.bat
; Example: PreReboot.bat (if the script is in the same folder as config_systeme.ps1)
PreRebootActionCommand="PreReboot.bat"

; Arguments to pass to the command above.
; Leave empty if no arguments are needed.
; Example: -Mode Backup -Verbose
PreRebootActionArguments=

; Launch method for the preparatory command.
;   cmd : (Recommended for .bat files) Executes the command via 'cmd.exe /c'.
;   powershell : Executes the command via 'powershell.exe -Command'.
;   direct : Launches the executable directly.
PreRebootActionLaunchMethod=cmd


;--- SYSTEM APPLICATIONS AND SERVICES ---

; Disable Microsoft OneDrive.
;   true : Disables OneDrive integration via local group policy.
;   false : Leaves OneDrive enabled.
DisableOneDrive=true


[Logging]
;------------------------------------------------------------------------------------------------
; Manages the behavior of log files (logs).
;------------------------------------------------------------------------------------------------

; Enables or disables log rotation to prevent them from becoming too large.
;   true : Old logs are archived (log.txt -> log.1.txt) at each launch.
;   false : A single log file is used and grows indefinitely.
EnableLogRotation=true

; Maximum number of log files to keep for the system script.
; Includes the current log and archives. '7' means keeping the logs for the last 7 days.
MaxSystemLogsToKeep=7

; Maximum number of log files to keep for the user script.
MaxUserLogsToKeep=7


[Process]
;------------------------------------------------------------------------------------------------
; Manages the launch and monitoring of the main business application.
;------------------------------------------------------------------------------------------------

; The launch trio: ProcessName, ProcessArguments, and LaunchMethod work together.

; 1. PROCESS NAME: Full path to the executable, script, or command.
;    - Can use environment variables like %USERPROFILE%.
;    - Example .exe: C:\Apps\MyApp.exe
;    - Example .bat: LaunchApp.bat (if the .bat is in the same folder as config_utilisateur.ps1)
ProcessName="LaunchApp.bat"

; 2. PROCESS ARGUMENTS: Arguments to pass to the command defined in ProcessName.
;    - Leave empty if no arguments are required.
ProcessArguments=

; 3. LAUNCH METHOD: Specifies HOW the command should be executed.
;    Valid options:
;      direct      : Launches the 'ProcessName' executable directly. The 'ProcessArguments' are passed
;                    as is. This is the standard method for most .exe files.
;
;      powershell  : Launches the command via 'powershell.exe'. Ideal for .ps1 scripts.
;                    The executed command is: powershell.exe -NoProfile -Command "& 'ProcessName' ProcessArguments"
;
;      cmd         : (Recommended for .bat files) Launches the command via 'cmd.exe'. Useful if the application
;                    expects to be launched from a command prompt.
;                    The executed command is: cmd.exe /c "'ProcessName' ProcessArguments"
LaunchMethod=cmd


[Gotify]
;------------------------------------------------------------------------------------------------
; Manages sending status notifications via a Gotify server. (Optional)
;------------------------------------------------------------------------------------------------

; Enables or disables Gotify notifications.
EnableGotify=false

; Base URL of your Gotify instance.
Url=

; Token of the application created in Gotify for sending messages.
Token=

; Priority of Gotify messages (an integer).
Priority=1

; Notification titles. You can use the %COMPUTERNAME% and %USERNAME% variables.
GotifyTitleSuccessSystem=%COMPUTERNAME% System
GotifyTitleErrorSystem=ERROR System Configuration on %COMPUTERNAME%
GotifyTitleSuccessUser=%COMPUTERNAME% %USERNAME%
GotifyTitleErrorUser=ERROR User Configuration %USERNAME% on %COMPUTERNAME%
